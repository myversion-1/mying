# æ€§èƒ½æµ‹è¯•æŒ‡å— (Performance Testing Guide)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¿è¡Œ Bundle åˆ†æ

```bash
cd mying-web
npm run analyze
```

è¿™å°†ï¼š
- æ„å»ºé¡¹ç›®å¹¶åˆ†æ bundle å¤§å°
- è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨æ˜¾ç¤ºåˆ†ææŠ¥å‘Š
- è¯†åˆ«å¤§å‹ä¾èµ–å’Œä»£ç é‡å¤

### 2. è¿è¡Œ Lighthouse æ€§èƒ½æµ‹è¯•

#### æ­¥éª¤ 1: å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

#### æ­¥éª¤ 2: è¿è¡Œ Lighthouse æµ‹è¯•ï¼ˆæ–°ç»ˆç«¯ï¼‰
```powershell
npm run lighthouse:test
```

#### æ­¥éª¤ 3: æŸ¥çœ‹ç»“æœ
- **JSON æŠ¥å‘Šï¼š** `lighthouse-reports/comparison.json`
- **å¯è§†åŒ–å›¾è¡¨ï¼š** åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `scripts/generate-performance-chart.html`

### 3. æ‰‹åŠ¨è¿è¡Œ Lighthouseï¼ˆå¯é€‰ï¼‰

```bash
# Before optimization
npm run lighthouse:before

# After optimization  
npm run lighthouse:after
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡è¯´æ˜

### Core Web Vitals

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| **LCP** | < 2.5s | æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ |
| **FCP** | < 1.8s | é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´ |
| **CLS** | < 0.1 | ç´¯ç§¯å¸ƒå±€åç§» |
| **FID** | < 100ms | é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ |
| **TTI** | < 3.8s | å¯äº¤äº’æ—¶é—´ |

### Performance Score
- **90-100:** ä¼˜ç§€ âœ…
- **50-89:** éœ€è¦æ”¹è¿› âš ï¸
- **0-49:** å·® âŒ

---

## ğŸ” ä¼˜åŒ–éªŒè¯

### ISR éªŒè¯
1. è®¿é—® `/products` é¡µé¢
2. æ£€æŸ¥ Network æ ‡ç­¾ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   - åˆå§‹ HTML æ˜¯é™æ€ç”Ÿæˆçš„
   - 60ç§’åé‡æ–°éªŒè¯

### Bundle ä¼˜åŒ–éªŒè¯
1. è¿è¡Œ `npm run analyze`
2. æ£€æŸ¥æœ€å¤§çš„ chunk
3. è¯†åˆ«å¯ä»¥æ‹†åˆ†çš„åº“

### æ•°æ®æŠ“å–ä¼˜åŒ–éªŒè¯
1. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
2. éªŒè¯å¹¶è¡Œæ‰§è¡Œï¼ˆå¦‚æœå°†æ¥æœ‰å¼‚æ­¥æ“ä½œï¼‰

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

è¿è¡Œæµ‹è¯•åï¼Œå¯¹æ¯”æŠ¥å‘Šå°†åŒ…å«ï¼š

```json
{
  "before": {
    "lcp": 3500,
    "fcp": 2000,
    "performanceScore": 65
  },
  "after": {
    "lcp": 1800,
    "fcp": 900,
    "performanceScore": 85
  },
  "improvements": {
    "lcp": 48.57,
    "fcp": 55.00,
    "performanceScore": 30.77
  }
}
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### Lighthouse æµ‹è¯•å¤±è´¥
- ç¡®ä¿å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®ï¼ˆé»˜è®¤ 3000ï¼‰
- ç¡®ä¿ Lighthouse CLI å·²å®‰è£…ï¼š`npm install -g lighthouse`

### Bundle åˆ†æå¤±è´¥
- ç¡®ä¿ `@next/bundle-analyzer` å·²å®‰è£…
- æ£€æŸ¥ `next.config.ts` é…ç½®

### ISR ä¸å·¥ä½œ
- æ£€æŸ¥ `revalidate` æ˜¯å¦å·²å¯¼å‡º
- ç¡®ä¿é¡µé¢æ˜¯æœåŠ¡å™¨ç»„ä»¶ï¼ˆæ—  "use client"ï¼‰
- æ£€æŸ¥æ„å»ºæ—¥å¿—

---

**æœ€åæ›´æ–°ï¼š** 2025-01-05














